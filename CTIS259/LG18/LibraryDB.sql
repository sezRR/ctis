alter table borrowing  
drop CONSTRAINT borrowing_fk1;

alter table borrowing 
drop CONSTRAINT borrowing_fk2;

alter table bookaut
drop CONSTRAINT bookaut_fk1;

alter table bookaut
drop CONSTRAINT bookaut_fk2;

drop table students CASCADE CONSTRAINTS;
drop table books CASCADE CONSTRAINTS;
drop table authors CASCADE CONSTRAINTS;
drop table bookaut CASCADE CONSTRAINTS;
drop table borrowing CASCADE CONSTRAINTS;

purge recyclebin;

CREATE TABLE STUDENTS
(
STID NUMBER(3),
STNAME VARCHAR2(10) NOT NULL,
STSURNAME VARCHAR2(20) NOT NULL,
STADDRESS VARCHAR2(15),
CONSTRAINT STUDENTS_PK PRIMARY KEY(STID)
);

CREATE TABLE BOOKS
(
ISBN VARCHAR2(10),
TITLE VARCHAR2(30) NOT NULL,
STATUS CHAR(1),
CONSTRAINT BOOKS_PK PRIMARY KEY(ISBN),
CONSTRAINT BOOKS_FK1 CHECK (STATUS='A' OR STATUS='N')
);

CREATE TABLE AUTHORS
(
AID NUMBER(3),
ANAME VARCHAR2(10),
ASURNAME VARCHAR2(20),
COUNTRY VARCHAR2(10),
CONSTRAINT AUTHORS_PK PRIMARY KEY(AID)
);

CREATE TABLE BOOKAUT
(
ISBN VARCHAR2(10),
AUID NUMBER(3),
CONSTRAINT BOOKAUT_PK PRIMARY KEY(ISBN, AUID),
CONSTRAINT BOOKAUT_FK1 FOREIGN KEY (ISBN) REFERENCES BOOKS(ISBN),
CONSTRAINT BOOKAUT_FK2 FOREIGN KEY (AUID) REFERENCES AUTHORS(AID)
);

CREATE TABLE BORROWING
(
STUID NUMBER(3),
BISBN VARCHAR2(10),
BORROWDATE DATE DEFAULT SYSDATE,
RETURNDATE DATE,
DUEDATE DATE,
PUNISHMENT NUMBER(10,2) DEFAULT 0,
CONSTRAINT BORROWING_PK PRIMARY KEY (STUID, BISBN, BORROWDATE),
CONSTRAINT BORROWING_FK1 FOREIGN KEY (STUID) REFERENCES STUDENTS(STID),
CONSTRAINT BORROWING_FK2 FOREIGN KEY (BISBN) REFERENCES BOOKS(ISBN)
);

--STUDENTS TABLE
INSERT INTO STUDENTS (STID, STNAME, STSURNAME, STADDRESS) VALUES ('111', 'ALI', 'OKUR', 'ANKARA');
INSERT INTO STUDENTS (STID, STNAME, STSURNAME, STADDRESS) VALUES ('222', 'SEVINC', 'ER', 'IZMIR');
INSERT INTO STUDENTS (STID, STNAME, STSURNAME, STADDRESS) VALUES ('333', 'MESUT', 'ERSOY', 'ANKARA');
INSERT INTO STUDENTS (STID, STNAME, STSURNAME, STADDRESS) VALUES ('444', 'VELI', 'SURER', 'ISTANBUL');
INSERT INTO STUDENTS (STID, STNAME, STSURNAME, STADDRESS) VALUES ('555', 'AYSE', 'GEZER', 'ISTANBUL'); 

--BOOKS TABLE
INSERT INTO BOOKS (ISBN, TITLE, STATUS) VALUES ('0-201-20-8', 'Problem Solving in C', 'A');
INSERT INTO BOOKS (ISBN, TITLE, STATUS) VALUES ('0-501-70-6', 'Programming in Java', 'N');
INSERT INTO BOOKS (ISBN, TITLE, STATUS) VALUES ('4-258-60-7', 'DBMS', 'A');
INSERT INTO BOOKS (ISBN, TITLE, STATUS) VALUES ('0-201-00-6', 'Visual Basic', 'A');
INSERT INTO BOOKS (ISBN, TITLE, STATUS) VALUES ('5-401-80-5', 'ASP', 'A');
INSERT INTO BOOKS (ISBN, TITLE, STATUS) VALUES ('6-201-50-9', 'Algorithm', 'A');
INSERT INTO BOOKS (ISBN, TITLE, STATUS) VALUES ('4-580-20-5', 'Object Oriented Programming', 'N');
--AUTHORS TABLE
INSERT INTO AUTHORS (AID, ANAME, ASURNAME, COUNTRY) VALUES ('121', 'JERI R.', 'HANLY', 'USA');
INSERT INTO AUTHORS (AID, ANAME, ASURNAME, COUNTRY) VALUES ('122', 'ELLIOT B.', 'KOFFMAN', 'USA');
INSERT INTO AUTHORS (AID, ANAME, ASURNAME, COUNTRY) VALUES ('211', 'RICK', 'DECKER', 'GERMANY');
INSERT INTO AUTHORS (AID, ANAME, ASURNAME, COUNTRY) VALUES ('212', 'STUART', 'HIRSHFIELD', 'GERMANY');
INSERT INTO AUTHORS (AID, ANAME, ASURNAME, COUNTRY) VALUES ('311', 'GARY J.', 'BRONSON', 'USA');
INSERT INTO AUTHORS (AID, ANAME, ASURNAME, COUNTRY) VALUES ('411', 'ANDREW', 'DUTHIE', 'USA');
INSERT INTO AUTHORS (AID, ANAME, ASURNAME, COUNTRY) VALUES ('512', 'ROBERT', 'SEDGEWICK', 'ENGLAND');

--BOOKAUT TABLE
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('0-201-20-8', '121');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('0-201-20-8', '122');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('0-501-70-6', '211');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('0-501-70-6', '212');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('4-258-60-7', '512');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('0-201-00-6', '512');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('5-401-80-5', '411');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('6-201-50-9', '311');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('4-580-20-5', '311');
INSERT INTO BOOKAUT (ISBN, AUID) VALUES ('4-580-20-5', '121');

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, DUEDATE) 
VALUES ('111', '0-501-70-6', TO_DATE('07/10/2025', 'DD/MM/YYYY'), TO_DATE('22/10/2025', 'DD/MM/YYYY'));

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, RETURNDATE, DUEDATE) 
VALUES (111, '5-401-80-5', TO_DATE('04/10/2025', 'DD/MM/YYYY'), TO_DATE('08/10/2025', 'DD/MM/YYYY'),TO_DATE('19/10/2025', 'DD/MM/YYYY'));

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, RETURNDATE, DUEDATE) 
VALUES (111, '5-401-80-5', TO_DATE('08/11/2025', 'DD/MM/YYYY'), TO_DATE('28/11/2025', 'DD/MM/YYYY'),TO_DATE('23/11/2025', 'DD/MM/YYYY'));

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, RETURNDATE, DUEDATE) 
VALUES (222, '5-401-80-5', TO_DATE('29/10/2025', 'DD/MM/YYYY'), TO_DATE('28/11/2025', 'DD/MM/YYYY'),TO_DATE('13/11/2025', 'DD/MM/YYYY'));

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, RETURNDATE, DUEDATE)
VALUES ('333', '6-201-50-9', TO_DATE('27/09/2025', 'DD/MM/YYYY'), TO_DATE('14/10/2025', 'DD/MM/YYYY'), TO_DATE('12/10/2025', 'DD/MM/YYYY'));

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, RETURNDATE, DUEDATE) 
VALUES ('444', '4-580-20-5', TO_DATE('14/09/2025', 'DD/MM/YYYY'), TO_DATE('05/10/2025', 'DD/MM/YYYY'), TO_DATE('29/09/2025', 'DD/MM/YYYY'));

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, RETURNDATE, DUEDATE) 
VALUES ('444', '6-201-50-9', TO_DATE('05/11/2025', 'DD/MM/YYYY'), TO_DATE('28/11/2025', 'DD/MM/YYYY'), TO_DATE('20/11/2025', 'DD/MM/YYYY'));

INSERT INTO BORROWING (STUID, BISBN, BORROWDATE, DUEDATE)
VALUES ('333', '4-580-20-5', TO_DATE('09/11/2025', 'DD/MM/YYYY'), TO_DATE('24/11/2025', 'DD/MM/YYYY'));

COMMIT;
